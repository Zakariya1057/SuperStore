//
//  ShowPromotionPresenter.swift
//  SuperStore
//
//  Created by Zakariya Mohummed on 28/02/2021.
//  Copyright (c) 2021 Zakariya Mohummed. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol ShowPromotionPresentationLogic
{
    func presentPromotion(response: ShowPromotion.GetPromotion.Response)
}

class ShowPromotionPresenter: ShowPromotionPresentationLogic
{
    weak var viewController: ShowPromotionDisplayLogic?
    
    func presentPromotion(response: ShowPromotion.GetPromotion.Response)
    {
        let dateWorker = DateWorker()
        var displayedPromotion: ShowPromotion.DisplayedPromotion? = nil
        
        if let promotion = response.promotion {
            let endsAt: String? = promotion.endsAt == nil ? nil : dateWorker.formatDate(date: promotion.endsAt!)
            
            displayedPromotion = ShowPromotion.DisplayedPromotion(
                name: promotion.name,
                products: promotion.products,
                expires: promotion.expires,
                endsAt: endsAt
            )
        }
    
        let viewModel = ShowPromotion.GetPromotion.ViewModel(
            displayedPromotion: displayedPromotion,
            error: response.error,
            offline: response.offline
        )
        
        viewController?.displayPromotion(viewModel: viewModel)
    }
}
